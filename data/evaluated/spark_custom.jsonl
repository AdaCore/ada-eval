{"name":"char_count_1","location":{"path":"src/string_utils.ads","subprogram_name":"Count"},"prompt":"Please can you help me prove the count function in `src/string_utils.ads`.","sources":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural;\n\nend String_Utils;\n"},"canonical_solution":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         pragma Loop_Invariant (Result <= I - Str'First);\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural;\n\nend String_Utils;\n"},"canonical_evaluation_results":[{"eval":"build","compiled":true,"pre_format_warnings":false,"post_format_warnings":false},{"eval":"prove","result":"proved","proved_checks":{"SUBPROGRAM_TERMINATION":1,"VC_LOOP_INVARIANT_INIT":1,"VC_LOOP_INVARIANT_PRESERV":1,"VC_OVERFLOW_CHECK":2},"unproved_checks":{},"warnings":{},"non_spark_entities":[],"missing_required_checks":[],"pragma_assume_count":0,"proof_steps":8},{"eval":"test","compiled":true,"passed_tests":true}],"comments":"","generation_stats":{"exit_code":0,"stdout":"Dummy script executed with prompt: Please can you help me prove the count function in `src/string_utils.ads`.\nSleeping for 2 seconds to simulate processing...\n","stderr":"","runtime_ms":2003},"generated_solution":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural;\n\nend String_Utils;\n"},"evaluation_results":[{"eval":"build","compiled":true,"pre_format_warnings":false,"post_format_warnings":false},{"eval":"prove","result":"unproved","proved_checks":{"SUBPROGRAM_TERMINATION":1},"unproved_checks":{"VC_OVERFLOW_CHECK":1},"warnings":{},"non_spark_entities":[],"missing_required_checks":[],"pragma_assume_count":0,"proof_steps":2},{"eval":"test","compiled":true,"passed_tests":true}],"unit_tests":{"src/tests.adb":"with Ada.Assertions; use Ada.Assertions;\n\nwith String_Utils; use String_Utils;\n\nprocedure Tests is\n   procedure Check_Assertions_Enabled is\n   begin\n      begin\n         pragma Assert (False, \"Should raise\");\n      exception\n         when others =>\n            return; -- properly raised\n      end;\n      raise Program_Error with \"Assertions not enabled\";\n   end Check_Assertions_Enabled;\n\n   procedure Test_Count is\n   begin\n      pragma\n        Assert (Count (\"\", 'l') = 0, \"Count should be 0 for empty string\");\n      pragma\n        Assert (Count (\"Hello world!\", 'l') = 3, \"Count of 'l' should be 3\");\n      pragma\n        Assert\n          (Count (\"Hello world!\", 'h') = 0, \"Count should be case sensitive\");\n      pragma\n        Assert\n          (Count (\"Hello world!\", 'H') = 1, \"Count should be case sensitive\");\n   end Test_Count;\n\nbegin\n   Check_Assertions_Enabled;\n   Test_Count;\nend Tests;\n","tests.gpr":"with \"main.gpr\";\n\nproject Tests is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Exec_Dir use \"bin\";\n   for Create_Missing_Dirs use \"True\";\n   for Main use (\"tests.adb\");\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\nend Tests;"}}
{"name":"char_count_2","location":{"path":"src/string_utils.ads","subprogram_name":"Count"},"prompt":"Please can you help me prove the count function in `src/string_utils.ads`.","sources":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count_Ghost\n     (Str : String; Char : Character; Idx : Integer) return Natural\n   is (if Idx not in Str'Range\n       then 0\n       else\n         (if Str (Idx) = Char\n          then 1 + Count_Ghost (Str, Char, Idx - 1)\n          else 0 + Count_Ghost (Str, Char, Idx - 1)));\n\n   function Count (Str : String; Char : Character) return Natural\n   with Post => Count'Result = Count_Ghost (Str, Char, Str'Last);\n\nend String_Utils;\n"},"canonical_solution":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         pragma Loop_Invariant (Result = Count_Ghost (Str, Char, I - 1));\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count_Ghost\n     (Str : String; Char : Character; Idx : Integer) return Natural\n   is (if Idx not in Str'Range\n       then 0\n       else\n         (if Str (Idx) = Char\n          then 1 + Count_Ghost (Str, Char, Idx - 1)\n          else 0 + Count_Ghost (Str, Char, Idx - 1)))\n   with\n     Ghost,\n     Post               =>\n       (if Idx not in Str'Range\n        then Count_Ghost'Result = 0\n        else Count_Ghost'Result <= (Idx - Str'First) + 1),\n     Subprogram_Variant => (Decreases => Idx);\n\n   function Count (Str : String; Char : Character) return Natural\n   with Post => Count'Result = Count_Ghost (Str, Char, Str'Last);\n\nend String_Utils;\n"},"canonical_evaluation_results":[{"eval":"build","compiled":true,"pre_format_warnings":false,"post_format_warnings":false},{"eval":"prove","result":"proved","proved_checks":{"SUBPROGRAM_TERMINATION":2,"VC_INDEX_CHECK":1,"VC_LOOP_INVARIANT_INIT":1,"VC_LOOP_INVARIANT_PRESERV":1,"VC_OVERFLOW_CHECK":8,"VC_POSTCONDITION":2,"VC_SUBPROGRAM_VARIANT":2},"unproved_checks":{},"warnings":{},"non_spark_entities":[],"missing_required_checks":[],"pragma_assume_count":0,"proof_steps":27},{"eval":"test","compiled":true,"passed_tests":true}],"comments":"","generation_stats":{"exit_code":0,"stdout":"Dummy script executed with prompt: Please can you help me prove the count function in `src/string_utils.ads`.\nSleeping for 3 seconds to simulate processing...\n","stderr":"","runtime_ms":3003},"generated_solution":{"main.adc":"pragma SPARK_Mode (On);","main.gpr":"project Main is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Create_Missing_Dirs use \"True\";\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\n   package Builder is\n      for Global_Configuration_Pragmas use \"main.adc\";\n   end Builder;\n\nend Main;","src/string_utils.adb":"package body String_Utils is\n\n   function Count (Str : String; Char : Character) return Natural is\n      Result : Natural := 0;\n   begin\n      for I in Str'Range loop\n         if Str (I) = Char then\n            Result := Result + 1;\n         end if;\n      end loop;\n      return Result;\n   end Count;\n\nend String_Utils;\n","src/string_utils.ads":"package String_Utils is\n\n   function Count_Ghost\n     (Str : String; Char : Character; Idx : Integer) return Natural\n   is (if Idx not in Str'Range\n       then 0\n       else\n         (if Str (Idx) = Char\n          then 1 + Count_Ghost (Str, Char, Idx - 1)\n          else 0 + Count_Ghost (Str, Char, Idx - 1)));\n\n   function Count (Str : String; Char : Character) return Natural\n   with Post => Count'Result = Count_Ghost (Str, Char, Str'Last);\n\nend String_Utils;\n"},"evaluation_results":[{"eval":"build","compiled":true,"pre_format_warnings":false,"post_format_warnings":false},{"eval":"prove","result":"unproved","proved_checks":{"SUBPROGRAM_TERMINATION":1,"VC_INDEX_CHECK":1,"VC_OVERFLOW_CHECK":3},"unproved_checks":{"SUBPROGRAM_TERMINATION":1,"VC_OVERFLOW_CHECK":2,"VC_POSTCONDITION":1},"warnings":{},"non_spark_entities":[],"missing_required_checks":[{"rule":"VC_POSTCONDITION","entity_name":"String_Utils.Count","src_pattern":"Count'Result = Count_Ghost \\(Str, Char, Str'Last\\);"}],"pragma_assume_count":0,"proof_steps":113},{"eval":"test","compiled":true,"passed_tests":true}],"unit_tests":{"src/tests.adb":"with Ada.Assertions; use Ada.Assertions;\n\nwith String_Utils; use String_Utils;\n\nprocedure Tests is\n   procedure Check_Assertions_Enabled is\n   begin\n      begin\n         pragma Assert (False, \"Should raise\");\n      exception\n         when others =>\n            return; -- properly raised\n      end;\n      raise Program_Error with \"Assertions not enabled\";\n   end Check_Assertions_Enabled;\n\n   procedure Test_Count is\n   begin\n      pragma\n        Assert (Count (\"\", 'l') = 0, \"Count should be 0 for empty string\");\n      pragma\n        Assert (Count (\"Hello world!\", 'l') = 3, \"Count of 'l' should be 3\");\n      pragma\n        Assert\n          (Count (\"Hello world!\", 'h') = 0, \"Count should be case sensitive\");\n      pragma\n        Assert\n          (Count (\"Hello world!\", 'H') = 1, \"Count should be case sensitive\");\n   end Test_Count;\n\nbegin\n   Check_Assertions_Enabled;\n   Test_Count;\nend Tests;\n","tests.gpr":"with \"main.gpr\";\n\nproject Tests is\n   for Languages use (\"Ada\");\n\n   for Source_Dirs use (\"src\");\n   for Object_Dir use \"obj\";\n   for Exec_Dir use \"bin\";\n   for Create_Missing_Dirs use \"True\";\n   for Main use (\"tests.adb\");\n\n   package Compiler is\n      for Default_Switches (\"Ada\") use (\n         \"-g\"         -- Generate debug info\n         ,\"-gnata\"    -- Enable assertions and contracts\n         ,\"-gnatW8\"   -- UTF-8 encoding for wide characters\n         ,\"-gnat2022\" -- Use Ada 2022 features\n      );\n   end Compiler;\n\nend Tests;"},"required_checks":[{"rule":"VC_POSTCONDITION","entity_name":"String_Utils.Count","src_pattern":"Count'Result = Count_Ghost \\(Str, Char, Str'Last\\);"}]}
